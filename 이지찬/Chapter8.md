# Chapter 08 - 이벤트와 메시지 버스

## 8.2 단일 책임 원칙(SRP)
* **앞선 예제들에서 하나의 함수에서 여러가지 작업을 처리하고 있는 예제가 나온다.**
* **함수의 이름을 짓게 된다면 자연스레 then, and 같은 단어가 들어가게될 가능성이 높다.**
* **하나의 함수에서 작동되는 여러가지 기능중 하나의 기능의 변경사항으로 인해 다른 기능들에도 영향을 미칠수 있다.**
* **하여 하나의 기능은 하나의 함수로 분리(관심사 분리)하여 이러한 변경등에 다른 기능에 영향이 최대한 없도록 하여 불필요한 수정작업을 하지 않도록 한다.**

## 8.3 메시지 버스에 전부 다 싣자
* **이벤트**
    * **발생한 일에 대한 사실**
    * **불변객체**

## 8.3.2 이벤트는 간단한 데이터 클래스다.
* **단순히 어떠한 일이 일어났는지를 나타낼뿐이다.**
* **어떠한 일에 대한 속성값 만을 가지며 스스로 어떤 행동을 취하지는 않는다.**
* **예를 들어 주문이 발생 했을 경우 주문에 대한 속성값만 가질뿐이지 주문을 처리 하지는 않는다.**
* **예제 코드에서는 재고처리에 관한 코드가 있고 try except 처리를 하게되는데 StopIteration이 발생 했을때 이벤트에 품절처리에 대한 객체를 리스트에 담는 처리만 한다.**

## 8.3.4 메시지 버스는 이벤트를 핸들러에 매핑한다.
* **핸들러라는 함수를 통해 이벤트가 어떤 함수를 통해 처리 되어야 하는지 명시적으로 구현된다.**
* **예제코드에서 events.OutOfStock이라는 키값과 이메일을 보내는 함수가 값으로 선언되어 있다.**
* **events.OutOfStock라는 이벤트 발생시 메일을 보내도록 처리**
* **셀러리와 메시지 버스는 비슷한가?**
    * **공통점**
        * **작업을 위임한다 라는 개념**
        * **메시지 버스의 경우 이벤트가 발생 하면 이벤트에 맞는 Handler에게 처리하도록 위임**
        * **celery의 경우 작업을 워커에게 처리하도록 한다.**
    * **차이점**
        * **해결 하려는 문제 자체가 관점이 다르다.**
        * **메시지 버스는 시스템 모듈 간의 결합도를 낮추기 위함**
        * **celery의 경우 작업이 오래걸리거나, 빠르게 처리 되어야 할 경우 백그라운드 실행을 통해 효율적으로 처리하기 위함**

## 8.4 ~ 8.6 이벤트 케이스
* **코드 분석 및 차이점 정리 해야함**

## 8.7 마치며
* **이벤트를 이용한다면 실제 현실 세계에서 일어나는 사건에 대한 처리를 좀 더 유연하게 처리 할수가 있다.**
* **이벤트를 어떻게 처리 할 것인지를 Handler에 매핑처리 하고 이벤트 속성에 어떤 처리가 이루어 져야하는지만 정의 해주면 된다.**
* **목적에 맞는 오케스트레이션 처리 하기가 비교적 쉬워진다.**
    
